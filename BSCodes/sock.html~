<!DOCTYPE HTML>
<html>
   <head>
     <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
   </head>
	

		

   <body>
   
      <div id="sse">
         <button><a href="javascript:WebSocketTest()">Connect 2 BS Server</a></button>
      </div>

      <div id="BStable" style="display: none">


			<div class="container">
			  <h2>BalloonSat Sensor Data</h2>
			  <!--<p></p>  -->          
			  <table class="table">
			    <thead>
			      <tr>
			        <th>S1</th>
			        <th>S2</th>
			        <th>S3</th>
			        <th>S4</th>
			      </tr>
			    </thead>

			    <tbody>
			      <tr>
			        <td>John</td>
			        <td>Doe</td>
			        <td>john</td>
			        <td>com</td>

			      </tr>
			    </tbody>
			  </table>
			</div>

      </div>

      
   </body>
</html>


      <script type="text/javascript">
         function WebSocketTest()
         {
            if ("WebSocket" in window)
            {
               //alert("WebSocket is supported by your Browser!");
               
               // Let us open a web socket
               var ws = new WebSocket("ws://localhost:8888/ws");
            
               ws.onopen = function()
               {
                  // Web Socket is connected, send data using send()
                 ws.send("hello");
                  //alert("Message is sent...");
                  //document.getElementById("sse").innerHTML = "Connected 2 BS server";
                  document.remove(document.getElementById("sse"));

               };
            
               ws.onmessage = function (evt) 
               { 
                  var received_msg = evt.data;
                  //alert("Message is received... ==> " + received_msg);
                     

               
                     handleBSATdata(received_msg);
               };
            
               ws.onclose = function()
               { 
                  // websocket is closed.
                  alert("Connection is closed..."); 
               };
            }
            
            else
            {
               // The browser doesn't support WebSocket
               alert("WebSocket NOT supported by your Browser!");
            }
         }
      </script>



      <script type="text/javascript">
         function handleBSATdata(data)
         {
            //alert(data);

            console.log(data);
            return;
            var data = "10,20,30,40";
            var segments = data.split(",");

   			for (var i=0;i<4;i++)
   			{
            	document.getElementsByTagName("td").item(i).innerHTML = segments[i];
            }
         }

         handleBSATdata(9);
      </script>

      